# Switch System Configuration for POLARIS Framework
# This configuration defines how POLARIS connects to and manages the Switch system

system_name: "switch_yolo_system"
system_type: "computer_vision"
description: "YOLO model switching system for adaptive object detection"

# Connection configuration
connection:
  host: "localhost"
  port: 3001
  protocol: "http"

# Implementation-specific configuration
implementation:
  connector_class: "SwitchSystemConnector"
  timeout: 30.0
  max_retries: 3
  retry_base_delay: 1.0
  retry_max_delay: 5.0

# Switch system specific configuration
switch_system:
  model_file_path: "model.csv"
  monitor_file_path: "monitor.csv" 
  knowledge_file_path: "knowledge.csv"
  metrics_file_path: "metrics.csv"
  
  # Available YOLO models and their characteristics
  models:
    yolov5n:
      size: "nano"
      speed: "fastest"
      accuracy: "lowest"
      resource_usage: "minimal"
    yolov5s:
      size: "small"
      speed: "fast"
      accuracy: "low"
      resource_usage: "low"
    yolov5m:
      size: "medium"
      speed: "medium"
      accuracy: "medium"
      resource_usage: "medium"
    yolov5l:
      size: "large"
      speed: "slow"
      accuracy: "high"
      resource_usage: "high"
    yolov5x:
      size: "extra_large"
      speed: "slowest"
      accuracy: "highest"
      resource_usage: "maximum"

# Monitoring configuration
monitoring:
  metrics_collection_interval: 1.0  # seconds
  health_check_interval: 30.0       # seconds
  
  # Key metrics to monitor
  key_metrics:
    - "image_processing_time"
    - "confidence"
    - "utility"
    - "cpu_usage"
    - "detection_boxes"
    - "total_processed"

# Adaptation configuration
adaptation:
  # Thresholds for triggering adaptations
  thresholds:
    response_time_max: 2.0      # seconds
    confidence_min: 0.5         # minimum acceptable confidence
    utility_min: 0.3           # minimum acceptable utility
    cpu_usage_max: 80.0        # percentage
  
  # Adaptation strategies
  strategies:
    - name: "performance_optimization"
      trigger: "response_time_high"
      action: "switch_to_faster_model"
    - name: "accuracy_optimization" 
      trigger: "confidence_low"
      action: "switch_to_accurate_model"
    - name: "resource_optimization"
      trigger: "cpu_usage_high"
      action: "switch_to_efficient_model"

# Knowledge base configuration
knowledge_base:
  # Default thresholds for model switching based on input rate
  default_thresholds:
    yolov5n: [0.0, 2.0]    # [min_rate, max_rate]
    yolov5s: [2.0, 5.0]
    yolov5m: [5.0, 10.0]
    yolov5l: [10.0, 20.0]
    yolov5x: [20.0, 100.0]
  
  # Learning parameters
  learning:
    enabled: true
    adaptation_window: 300    # seconds
    confidence_threshold: 0.8
    update_frequency: 60      # seconds

# Execution configuration
execution:
  # Actions that can be performed on the system
  available_actions:
    - name: "switch_model"
      parameters: ["model_name"]
      description: "Switch to a different YOLO model"
    - name: "update_thresholds"
      parameters: ["model_thresholds"]
      description: "Update model switching thresholds"
    - name: "start_processing"
      parameters: []
      description: "Start image processing pipeline"
    - name: "stop_processing"
      parameters: []
      description: "Stop image processing pipeline"
    - name: "restart_processing"
      parameters: []
      description: "Restart image processing pipeline"

# Verification configuration
verification:
  # Constraints to verify before executing actions
  constraints:
    - name: "valid_model"
      type: "enum"
      values: ["yolov5n", "yolov5s", "yolov5m", "yolov5l", "yolov5x"]
      description: "Model must be one of the available YOLO models"
    - name: "threshold_range"
      type: "range"
      min: 0.0
      max: 100.0
      description: "Thresholds must be within valid range"
    - name: "processing_state"
      type: "boolean"
      description: "Processing must be in valid state for certain actions"

# Logging configuration
logging:
  level: "INFO"
  format: "json"
  include_metrics: true
  include_performance: true
  
  # Log rotation
  rotation:
    max_size: "100MB"
    backup_count: 5
    
# Performance configuration
performance:
  # Connection pooling
  connection_pool:
    max_connections: 10
    keepalive_timeout: 30
  
  # Caching
  cache:
    enabled: true
    ttl: 60  # seconds
    max_entries: 1000
  
  # Batch processing
  batch:
    enabled: false  # Switch system processes one image at a time
    max_batch_size: 1
    batch_timeout: 1.0